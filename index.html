<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Raksha Bandhan Greeting</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes float {
      0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
    .float {
      animation: float 10s linear infinite;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1;
      pointer-events: none;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center overflow-hidden relative bg-gradient-to-br from-pink-100 via-yellow-50 to-purple-100">

  <!-- Optional Soft Overlay -->
  <div class="absolute inset-0 bg-white/30 backdrop-blur-sm z-0"></div>

  <!-- Fireworks -->
  <canvas id="fireworks"></canvas>

  <!-- Greeting Card -->
  <div class="bg-white/90 rounded-xl shadow-xl p-4 sm:p-6 max-w-sm sm:max-w-xl z-10 mx-4 backdrop-blur-md text-center">
    <button id="startBtn" class="bg-pink-600 text-white px-6 py-2 rounded-lg shadow-lg hover:bg-pink-700 transition duration-300 mb-4">
      please click to start
    </button>
    <pre id="message" class="text-gray-800 text-sm sm:text-base font-mono whitespace-pre-wrap text-left hidden"></pre>
  </div>

  <!-- Background Music -->
  <audio id="bgMusic" loop>
    <source src="rakhi-music.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <!-- JavaScript -->
  <script>
    const message = `
Dear Sister,

On this special occasion of Raksha Bandhan,
I want you to know how much you mean to me.
Your love, care, and presence make life beautiful.

Wishing you joy, success, and all the happiness in the world.

Happy Raksha Bandhan!

With love,
Your Brother ❤️
    `;

    const messageElement = document.getElementById("message");
    const startBtn = document.getElementById("startBtn");
    const music = document.getElementById("bgMusic");
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    let fireworks = [];

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    function typeMessage() {
      let index = 0;
      function type() {
        if (index < message.length) {
          messageElement.textContent += message.charAt(index);
          index++;
          setTimeout(type, 50);
        }
      }
      type();
    }

    function createFlowers() {
      for (let i = 0; i < 15; i++) {
        const flower = document.createElement("img");
        flower.src = "./flower.png"; // Replace with your flower image path
        flower.className = "absolute pointer-events-none float";
        flower.style.left = Math.random() * 100 + "vw";
        flower.style.top = "-50px"; // Start above the screen
        flower.style.width = flower.style.height = Math.random() * 30 + 20 + "px";
        flower.style.animationDelay = (Math.random() * 10) + "s";
        document.body.appendChild(flower);
      }
    }

    function Firework() {
      this.x = Math.random() * canvas.width;
      this.y = canvas.height;
      this.targetY = Math.random() * canvas.height / 2;
      this.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
      this.size = 2;
      this.speed = Math.random() * 3 + 2;
    }

    Firework.prototype.update = function () {
      this.y -= this.speed;
    };

    Firework.prototype.draw = function () {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fillStyle = this.color;
      ctx.fill();
    };

    function animateFireworks() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (Math.random() < 0.1) {
        fireworks.push(new Firework());
      }
      fireworks.forEach((f, i) => {
        f.update();
        f.draw();
        if (f.y < f.targetY) fireworks.splice(i, 1);
      });
      requestAnimationFrame(animateFireworks);
    }

    startBtn.addEventListener("click", () => {
  startBtn.remove(); // permanently remove button
  messageElement.classList.remove("hidden");
  typeMessage();
  createFlowers();
  animateFireworks();
  music.play().catch(err => console.warn("Playback error:", err));
});

  </script>

</body>
</html>
