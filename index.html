<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Raksha Bandhan Greeting with Fireworks</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
      pointer-events: none;
    }
  </style>
</head>
<body class="bg-pink-50 min-h-screen flex items-center justify-center overflow-hidden relative">

  <!-- Fireworks Canvas -->
  <canvas id="fireworks"></canvas>

  <!-- Greeting Card -->
  <div class="bg-white rounded-xl shadow-xl p-6 max-w-xl z-10 relative">
    <pre id="message" class="text-gray-800 text-base font-mono whitespace-pre-wrap"></pre>
  </div>

  <!-- Background Music -->
  <audio autoplay loop>
    <source src="rakhi-music.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <!-- Typing Animation Script -->
  <script>
    const message = `
Dear Sister,

On this special occasion of Raksha Bandhan,
I want you to know how much you mean to me.
Your love, care, and presence make life beautiful.

Wishing you joy, success, and all the happiness in the world.

Happy Raksha Bandhan!

With love,
Your Brother ❤️
    `;
    const messageElement = document.getElementById("message");
    let index = 0;
    function type() {
      if (index < message.length) {
        messageElement.textContent += message.charAt(index);
        index++;
        setTimeout(type, 50);
      }
    }
    window.onload = type;
  </script>

  <!-- Fireworks Animation -->
  <script>
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    let cw, ch;

    function resizeCanvas() {
      cw = canvas.width = window.innerWidth;
      ch = canvas.height = window.innerHeight;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    class Firework {
      constructor() {
        this.reset();
      }

      reset() {
        this.x = Math.random() * cw;
        this.y = ch;
        this.tx = Math.random() * cw;
        this.ty = Math.random() * ch / 2;
        this.distance = 0;
        this.exploded = false;
        this.particles = [];
      }

      update() {
        if (!this.exploded) {
          const dx = this.tx - this.x;
          const dy = this.ty - this.y;
          this.x += dx * 0.05;
          this.y += dy * 0.05;
          if (Math.abs(dx) < 2 && Math.abs(dy) < 2) {
            this.exploded = true;
            this.createParticles();
          }
        } else {
          this.particles.forEach(p => p.update());
        }
      }

      draw() {
        if (!this.exploded) {
          ctx.beginPath();
          ctx.arc(this.x, this.y, 3, 0, 2 * Math.PI);
          ctx.fillStyle = 'white';
          ctx.fill();
        } else {
          this.particles.forEach(p => p.draw());
        }
      }

      createParticles() {
        for (let i = 0; i < 40; i++) {
          this.particles.push(new Particle(this.tx, this.ty));
        }
      }
    }

    class Particle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.angle = Math.random() * 2 * Math.PI;
        this.speed = Math.random() * 5 + 1;
        this.radius = Math.random() * 2 + 1;
        this.alpha = 1;
        this.color = `hsl(${Math.random() * 360}, 100%, 60%)`;
      }

      update() {
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed;
        this.alpha -= 0.02;
      }

      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
        ctx.fillStyle = this.color;
        ctx.globalAlpha = this.alpha;
        ctx.fill();
        ctx.globalAlpha = 1;
      }
    }

    let fireworks = [];
    setInterval(() => {
      fireworks.push(new Firework());
    }, 700);

    function animate() {
      ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
      ctx.fillRect(0, 0, cw, ch);
      fireworks.forEach((fw, i) => {
        fw.update();
        fw.draw();
        if (fw.exploded && fw.particles.every(p => p.alpha <= 0)) {
          fireworks.splice(i, 1);
        }
      });
      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>
