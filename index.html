<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Raksha Bandhan Greeting</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes floatDown {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 0; }
      50% { opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
    .float {
      animation: floatDown 10s linear infinite;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1;
      pointer-events: none;
    }
    #cursor {
      display: inline-block;
      width: 1px;
      background: black;
      animation: blink 1s step-end infinite;
      margin-left: 2px;
    }
    @keyframes blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-yellow-100 via-pink-100 to-purple-100 min-h-screen flex flex-col items-center justify-center overflow-hidden relative">

  <!-- Fireworks -->
  <canvas id="fireworks"></canvas>

  <!-- Start Button -->
  <button id="startBtn" class="z-20 bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-full shadow-lg font-bold text-lg transition duration-300">
    Start Greeting
  </button>

  <!-- Greeting Card -->
  <div id="greetingCard" class="hidden bg-white/90 rounded-xl shadow-xl p-4 sm:p-6 max-w-sm sm:max-w-xl z-10 mx-4 backdrop-blur-md mt-4">
    <pre id="message" class="text-gray-800 text-sm sm:text-base font-mono whitespace-pre-wrap p-4 border border-gray-300 rounded-md shadow-inner bg-white/80 leading-relaxed"></pre>
    <p class="mt-4 text-right text-xs text-gray-600 italic">— Made by Aditya Zingade</p>
  </div>

  <!-- Background Music -->
  <audio id="bgAudio" loop>
    <source src="rakhi-music.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <!-- Scripts -->
  <script>
    const message = `
Dear Sister,

On this special occasion of Raksha Bandhan,
I want you to know how much you mean to me.
Your love, care, and presence make life beautiful.

Wishing you joy, success, and all the happiness in the world.

Happy Raksha Bandhan!

With love,
Your Brother ❤️
    `;

    const messageElement = document.getElementById("message");
    const startBtn = document.getElementById("startBtn");
    const greetingCard = document.getElementById("greetingCard");
    const audio = document.getElementById("bgAudio");

    startBtn.addEventListener("click", () => {
      // Start audio
      audio.play().catch(err => console.log("Autoplay blocked"));

      // Show greeting
      greetingCard.classList.remove("hidden");

      // Hide button
      startBtn.style.display = "none";

      // Typing animation
      let index = 0;
      const cursor = document.createElement("span");
      cursor.id = "cursor";
      messageElement.appendChild(cursor);

      function typeMessage() {
        if (index < message.length) {
          messageElement.insertBefore(document.createTextNode(message.charAt(index)), cursor);
          index++;
          setTimeout(typeMessage, Math.random() * (70 - 30) + 30);
        } else {
          cursor.remove();
        }
      }
      typeMessage();

      // Floating flowers
      for (let i = 0; i < 15; i++) {
        const flower = document.createElement("img");
        flower.src = "./flower.png"; // Replace with your flower PNG path
        flower.className = "absolute pointer-events-none float";
        flower.style.left = Math.random() * 100 + "vw";
        flower.style.top = "-50px";
        flower.style.width = flower.style.height = Math.random() * 30 + 20 + "px";
        flower.style.animationDelay = (Math.random() * 10) + "s";
        document.body.appendChild(flower);
      }
    });

    // Fireworks animation
    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    window.addEventListener("resize", () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });

    let fireworks = [];

    function Firework() {
      this.x = Math.random() * canvas.width;
      this.y = canvas.height;
      this.targetY = Math.random() * canvas.height / 2;
      this.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
      this.size = 2;
      this.speed = Math.random() * 3 + 2;
    }

    Firework.prototype.update = function () {
      this.y -= this.speed;
    };

    Firework.prototype.draw = function () {
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fillStyle = this.color;
      ctx.fill();
    };

    function animateFireworks() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      if (Math.random() < 0.1) {
        fireworks.push(new Firework());
      }
      fireworks.forEach((f, i) => {
        f.update();
        f.draw();
        if (f.y < f.targetY) fireworks.splice(i, 1);
      });
      requestAnimationFrame(animateFireworks);
    }

    animateFireworks();
  </script>
</body>
</html>
